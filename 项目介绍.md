# nanobot é¡¹ç›®ä»‹ç»

## ğŸˆ é¡¹ç›®æ¦‚è¿°

**nanobot** æ˜¯ä¸€ä¸ªè¶…è½»é‡çº§çš„ä¸ªäººAIåŠ©æ‰‹æ¡†æ¶ï¼Œçµæ„Ÿæ¥æºäº [Clawdbot](https://github.com/openclaw/openclaw) é¡¹ç›®ã€‚

### æ ¸å¿ƒç‰¹ç‚¹

- **è¶…è½»é‡çº§**: æ ¸å¿ƒä»£ç†ä»£ç ä»…çº¦ **4,000 è¡Œ**ï¼Œæ¯” Clawdbot çš„ 430,000+ è¡Œä»£ç å° **99%**
- **ç ”ç©¶å‹å¥½**: ä»£ç æ¸…æ™°æ˜“è¯»ï¼Œæ˜“äºç†è§£ã€ä¿®æ”¹å’Œæ‰©å±•
- **å¿«é€Ÿå¯åŠ¨**: æœ€å°åŒ–èµ„æºå ç”¨ï¼Œå¯åŠ¨æ›´å¿«ï¼Œè¿­ä»£æ›´è¿…é€Ÿ
- **æ˜“äºä½¿ç”¨**: ä¸€é”®éƒ¨ç½²ï¼Œå¼€ç®±å³ç”¨

### å®æ—¶ä»£ç è¡Œæ•°

è¿è¡Œä»¥ä¸‹å‘½ä»¤å¯éšæ—¶éªŒè¯æ ¸å¿ƒä»£ç è¡Œæ•°ï¼š
```bash
bash core_agent_lines.sh
```

å½“å‰æ ¸å¿ƒä»£ç è¡Œæ•°ï¼š**3,448 è¡Œ**

---

## ğŸ—ï¸ ç³»ç»Ÿæ¶æ„

nanobot é‡‡ç”¨æ¨¡å—åŒ–æ¶æ„è®¾è®¡ï¼Œä¸»è¦åŒ…å«ä»¥ä¸‹æ ¸å¿ƒç»„ä»¶ï¼š

```
nanobot/
â”œâ”€â”€ agent/          # ä»£ç†æ ¸å¿ƒé€»è¾‘
â”‚   â”œâ”€â”€ loop.py     # ä»£ç†å¾ªç¯å¼•æ“
â”‚   â”œâ”€â”€ context.py  # ä¸Šä¸‹æ–‡æ„å»ºå™¨
â”‚   â”œâ”€â”€ memory.py   # è®°å¿†ç®¡ç†
â”‚   â”œâ”€â”€ skills.py   # æŠ€èƒ½ç³»ç»Ÿ
â”‚   â”œâ”€â”€ subagent.py # å­ä»£ç†ç®¡ç†
â”‚   â””â”€â”€ tools/      # å·¥å…·é›†
â”‚       â”œâ”€â”€ base.py         # å·¥å…·åŸºç±»
â”‚       â”œâ”€â”€ filesystem.py   # æ–‡ä»¶ç³»ç»Ÿå·¥å…·
â”‚       â”œâ”€â”€ shell.py        # Shellæ‰§è¡Œå·¥å…·
â”‚       â”œâ”€â”€ web.py          # Webå·¥å…·
â”‚       â”œâ”€â”€ message.py      # æ¶ˆæ¯å·¥å…·
â”‚       â”œâ”€â”€ spawn.py        # å­ä»£ç†ç”Ÿæˆå·¥å…·
â”‚       â””â”€â”€ cron.py         # å®šæ—¶ä»»åŠ¡å·¥å…·
â”œâ”€â”€ bus/            # æ¶ˆæ¯æ€»çº¿
â”‚   â”œâ”€â”€ events.py   # äº‹ä»¶å®šä¹‰
â”‚   â””â”€â”€ queue.py    # æ¶ˆæ¯é˜Ÿåˆ—
â”œâ”€â”€ channels/       # èŠå¤©æ¸ é“
â”‚   â”œâ”€â”€ base.py     # æ¸ é“åŸºç±»
â”‚   â”œâ”€â”€ telegram.py # Telegramé›†æˆ
â”‚   â”œâ”€â”€ discord.py  # Discordé›†æˆ
â”‚   â”œâ”€â”€ whatsapp.py # WhatsAppé›†æˆ
â”‚   â”œâ”€â”€ feishu.py   # é£ä¹¦é›†æˆ
â”‚   â”œâ”€â”€ dingtalk.py # é’‰é’‰é›†æˆ
â”‚   â””â”€â”€ manager.py  # æ¸ é“ç®¡ç†å™¨
â”œâ”€â”€ providers/      # LLMæä¾›å•†
â”‚   â”œâ”€â”€ base.py              # æä¾›å•†åŸºç±»
â”‚   â”œâ”€â”€ litellm_provider.py  # LiteLLMæä¾›å•†
â”‚   â”œâ”€â”€ registry.py          # æä¾›å•†æ³¨å†Œè¡¨
â”‚   â””â”€â”€ transcription.py     # è¯­éŸ³è½¬å½•
â”œâ”€â”€ config/         # é…ç½®ç®¡ç†
â”‚   â”œâ”€â”€ loader.py   # é…ç½®åŠ è½½å™¨
â”‚   â””â”€â”€ schema.py   # é…ç½®æ¨¡å¼
â”œâ”€â”€ session/        # ä¼šè¯ç®¡ç†
â”‚   â””â”€â”€ manager.py  # ä¼šè¯ç®¡ç†å™¨
â”œâ”€â”€ cron/           # å®šæ—¶ä»»åŠ¡
â”‚   â”œâ”€â”€ service.py  # å®šæ—¶æœåŠ¡
â”‚   â””â”€â”€ types.py    # ç±»å‹å®šä¹‰
â”œâ”€â”€ heartbeat/      # å¿ƒè·³æœåŠ¡
â”‚   â””â”€â”€ service.py  # å¿ƒè·³æœåŠ¡
â”œâ”€â”€ cli/            # å‘½ä»¤è¡Œæ¥å£
â”‚   â””â”€â”€ commands.py # CLIå‘½ä»¤
â””â”€â”€ utils/          # å·¥å…·å‡½æ•°
    â””â”€â”€ helpers.py  # è¾…åŠ©å‡½æ•°
```

### æ¶æ„æµç¨‹

1. **æ¶ˆæ¯æ¥æ”¶**: é€šè¿‡å„ç§æ¸ é“ï¼ˆTelegramã€Discordã€WhatsAppç­‰ï¼‰æ¥æ”¶ç”¨æˆ·æ¶ˆæ¯
2. **æ¶ˆæ¯æ€»çº¿**: æ¶ˆæ¯é€šè¿‡æ¶ˆæ¯æ€»çº¿ä¼ é€’ç»™ä»£ç†
3. **ä¸Šä¸‹æ–‡æ„å»º**: ä»£ç†æ„å»ºä¸Šä¸‹æ–‡ï¼ŒåŒ…æ‹¬å†å²è®°å½•ã€è®°å¿†ã€æŠ€èƒ½ç­‰
4. **LLMè°ƒç”¨**: è°ƒç”¨å¤§è¯­è¨€æ¨¡å‹å¤„ç†è¯·æ±‚
5. **å·¥å…·æ‰§è¡Œ**: æ ¹æ®æ¨¡å‹å†³ç­–æ‰§è¡Œç›¸åº”çš„å·¥å…·
6. **å“åº”å‘é€**: å°†å“åº”å‘é€å›ç”¨æˆ·

---

## âœ¨ ä¸»è¦åŠŸèƒ½

### 1. å¤šæ¸ é“èŠå¤©æ”¯æŒ

| æ¸ é“ | éš¾åº¦ | è¯´æ˜ |
|------|------|------|
| **Telegram** | ç®€å• | åªéœ€è¦Bot Token |
| **Discord** | ç®€å• | Bot Token + Intents |
| **WhatsApp** | ä¸­ç­‰ | éœ€è¦æ‰«ç ç™»å½• |
| **Feishu (é£ä¹¦)** | ä¸­ç­‰ | éœ€è¦åº”ç”¨å‡­è¯ |
| **DingTalk (é’‰é’‰)** | ä¸­ç­‰ | éœ€è¦åº”ç”¨å‡­è¯ |

### 2. å¤šLLMæä¾›å•†æ”¯æŒ

| æä¾›å•† | ç”¨é€” | è·å–APIå¯†é’¥ |
|--------|------|-------------|
| `openrouter` | LLMï¼ˆæ¨èï¼Œè®¿é—®æ‰€æœ‰æ¨¡å‹ï¼‰ | [openrouter.ai](https://openrouter.ai) |
| `anthropic` | LLMï¼ˆClaudeç›´è¿ï¼‰ | [console.anthropic.com](https://console.anthropic.com) |
| `openai` | LLMï¼ˆGPTç›´è¿ï¼‰ | [platform.openai.com](https://platform.openai.com) |
| `deepseek` | LLMï¼ˆDeepSeekç›´è¿ï¼‰ | [platform.deepseek.com](https://platform.deepseek.com) |
| `groq` | LLM + **è¯­éŸ³è½¬å½•**ï¼ˆWhisperï¼‰ | [console.groq.com](https://console.groq.com) |
| `gemini` | LLMï¼ˆGeminiç›´è¿ï¼‰ | [aistudio.google.com](https://aistudio.google.com) |
| `aihubmix` | LLMï¼ˆAPIç½‘å…³ï¼Œè®¿é—®æ‰€æœ‰æ¨¡å‹ï¼‰ | [aihubmix.com](https://aihubmix.com) |
| `dashscope` | LLMï¼ˆé€šä¹‰åƒé—®ï¼‰ | [dashscope.console.aliyun.com](https://dashscope.console.aliyun.com) |
| `moonshot` | LLMï¼ˆMoonshot/Kimiï¼‰ | [platform.moonshot.cn](https://platform.moonshot.cn) |
| `zhipu` | LLMï¼ˆæ™ºè°±GLMï¼‰ | [open.bigmodel.cn](https://open.bigmodel.cn) |
| `vllm` | LLMï¼ˆæœ¬åœ°ï¼Œä»»ä½•OpenAIå…¼å®¹æœåŠ¡å™¨ï¼‰ | â€” |

### 3. å·¥å…·ç³»ç»Ÿ

- **æ–‡ä»¶ç³»ç»Ÿå·¥å…·**: è¯»å–ã€å†™å…¥ã€ç¼–è¾‘ã€åˆ—å‡ºæ–‡ä»¶
- **Shellå·¥å…·**: æ‰§è¡Œå‘½ä»¤è¡Œå‘½ä»¤
- **Webå·¥å…·**: ç½‘é¡µæœç´¢ã€ç½‘é¡µæŠ“å–
- **æ¶ˆæ¯å·¥å…·**: å‘é€æ¶ˆæ¯åˆ°å„ä¸ªæ¸ é“
- **å­ä»£ç†å·¥å…·**: ç”Ÿæˆå’Œç®¡ç†å­ä»£ç†
- **å®šæ—¶ä»»åŠ¡å·¥å…·**: åˆ›å»ºå’Œç®¡ç†å®šæ—¶ä»»åŠ¡

### 4. å®šæ—¶ä»»åŠ¡ï¼ˆCronï¼‰

æ”¯æŒä½¿ç”¨è‡ªç„¶è¯­è¨€åˆ›å»ºå®šæ—¶ä»»åŠ¡ï¼š
```bash
nanobot cron add --name "daily" --message "æ—©ä¸Šå¥½ï¼" --cron "0 9 * * *"
nanobot cron add --name "hourly" --message "æ£€æŸ¥çŠ¶æ€" --every 3600
```

### 5. ä¼šè¯ç®¡ç†

- æ”¯æŒå¤šä¼šè¯ç®¡ç†
- ä¼šè¯å†å²æŒä¹…åŒ–
- ä¸Šä¸‹æ–‡ä¿æŒ

### 6. å®‰å…¨ç‰¹æ€§

- å·¥ä½œç©ºé—´é™åˆ¶ï¼šå¯é™åˆ¶æ‰€æœ‰å·¥å…·è®¿é—®ä»…åœ¨å·¥ä½œç©ºé—´ç›®å½•å†…
- ç”¨æˆ·ç™½åå•ï¼šå¯é™åˆ¶ç‰¹å®šç”¨æˆ·æ‰èƒ½ä¸æœºå™¨äººäº¤äº’

---

## ğŸ“¦ ç¯å¢ƒè¦æ±‚

- **Python**: â‰¥ 3.11
- **æ“ä½œç³»ç»Ÿ**: Windowsã€Linuxã€macOS
- **Node.js**: â‰¥ 18ï¼ˆä»…WhatsAppéœ€è¦ï¼‰

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…

#### ä»æºç å®‰è£…ï¼ˆæ¨èç”¨äºå¼€å‘ï¼‰

```bash
git clone https://github.com/HKUDS/nanobot.git
cd nanobot
pip install -e .
```

#### ä½¿ç”¨ uv å®‰è£…ï¼ˆç¨³å®šã€å¿«é€Ÿï¼‰

```bash
uv tool install nanobot-ai
```

#### ä» PyPI å®‰è£…ï¼ˆç¨³å®šï¼‰

```bash
pip install nanobot-ai
```

### 2. åˆå§‹åŒ–é…ç½®

```bash
nanobot onboard
```

è¿™å°†åœ¨ `~/.nanobot/` ç›®å½•ä¸‹åˆ›å»ºé…ç½®æ–‡ä»¶å’Œå·¥ä½œç©ºé—´ã€‚

### 3. é…ç½®APIå¯†é’¥

ç¼–è¾‘ `~/.nanobot/config.json` æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„APIå¯†é’¥ï¼š

```json
{
  "providers": {
    "openrouter": {
      "apiKey": "sk-or-v1-xxx"
    }
  },
  "agents": {
    "defaults": {
      "model": "anthropic/claude-opus-4-5"
    }
  }
}
```

è·å–APIå¯†é’¥ï¼š
- [OpenRouter](https://openrouter.ai/keys)ï¼ˆå…¨çƒç”¨æˆ·æ¨èï¼‰
- [DashScope](https://dashscope.console.aliyun.com)ï¼ˆé€šä¹‰åƒé—®ï¼‰
- [Brave Search](https://brave.com/search/api/)ï¼ˆå¯é€‰ï¼Œç”¨äºç½‘é¡µæœç´¢ï¼‰

### 4. å¼€å§‹èŠå¤©

```bash
# å•æ¡æ¶ˆæ¯æ¨¡å¼
nanobot agent -m "2+2ç­‰äºå¤šå°‘ï¼Ÿ"

# äº¤äº’æ¨¡å¼
nanobot agent
```

---

## ğŸ–¥ï¸ æœ¬åœ°æ¨¡å‹æ”¯æŒï¼ˆvLLMï¼‰

ä½¿ç”¨ä½ è‡ªå·±çš„æœ¬åœ°æ¨¡å‹è¿è¡Œnanobotï¼š

### 1. å¯åŠ¨vLLMæœåŠ¡å™¨

```bash
vllm serve meta-llama/Llama-3.1-8B-Instruct --port 8000
```

### 2. é…ç½®

ç¼–è¾‘ `~/.nanobot/config.json`ï¼š

```json
{
  "providers": {
    "vllm": {
      "apiKey": "dummy",
      "apiBase": "http://localhost:8000/v1"
    }
  },
  "agents": {
    "defaults": {
      "model": "meta-llama/Llama-3.1-8B-Instruct"
    }
  }
}
```

### 3. èŠå¤©

```bash
nanobot agent -m "ä½ å¥½ï¼Œæ¥è‡ªæœ¬åœ°LLMï¼"
```

---

## ğŸ’¬ é…ç½®èŠå¤©æ¸ é“

### Telegramï¼ˆæ¨èï¼‰

**1. åˆ›å»ºæœºå™¨äºº**
- æ‰“å¼€Telegramï¼Œæœç´¢ `@BotFather`
- å‘é€ `/newbot`ï¼ŒæŒ‰ç…§æç¤ºæ“ä½œ
- å¤åˆ¶token

**2. é…ç½®**

ç¼–è¾‘ `~/.nanobot/config.json`ï¼š

```json
{
  "channels": {
    "telegram": {
      "enabled": true,
      "token": "YOUR_BOT_TOKEN",
      "allowFrom": ["YOUR_USER_ID"]
    }
  }
}
```

ä»Telegramçš„ `@userinfobot` è·å–ä½ çš„ç”¨æˆ·IDã€‚

**3. è¿è¡Œ**

```bash
nanobot gateway
```

### Discord

**1. åˆ›å»ºæœºå™¨äºº**
- è®¿é—® https://discord.com/developers/applications
- åˆ›å»ºåº”ç”¨ â†’ Bot â†’ æ·»åŠ Bot
- å¤åˆ¶bot token

**2. å¯ç”¨Intents**
- åœ¨Botè®¾ç½®ä¸­ï¼Œå¯ç”¨ **MESSAGE CONTENT INTENT**
- ï¼ˆå¯é€‰ï¼‰å¦‚æœè®¡åˆ’ä½¿ç”¨åŸºäºæˆå‘˜æ•°æ®çš„å…è®¸åˆ—è¡¨ï¼Œå¯ç”¨ **SERVER MEMBERS INTENT**

**3. è·å–ç”¨æˆ·ID**
- Discordè®¾ç½® â†’ é«˜çº§ â†’ å¯ç”¨ **å¼€å‘è€…æ¨¡å¼**
- å³é”®ç‚¹å‡»ä½ çš„å¤´åƒ â†’ **å¤åˆ¶ç”¨æˆ·ID**

**4. é…ç½®**

```json
{
  "channels": {
    "discord": {
      "enabled": true,
      "token": "YOUR_BOT_TOKEN",
      "allowFrom": ["YOUR_USER_ID"]
    }
  }
}
```

**5. é‚€è¯·æœºå™¨äºº**
- OAuth2 â†’ URLç”Ÿæˆå™¨
- èŒƒå›´ï¼š`bot`
- Botæƒé™ï¼š`å‘é€æ¶ˆæ¯`ã€`è¯»å–æ¶ˆæ¯å†å²`
- æ‰“å¼€ç”Ÿæˆçš„é‚€è¯·URLå¹¶å°†æœºå™¨äººæ·»åŠ åˆ°ä½ çš„æœåŠ¡å™¨

**6. è¿è¡Œ**

```bash
nanobot gateway
```

### WhatsApp

éœ€è¦ **Node.js â‰¥ 18**ã€‚

**1. é“¾æ¥è®¾å¤‡**

```bash
nanobot channels login
# ä½¿ç”¨WhatsApp â†’ è®¾ç½® â†’ å…³è”è®¾å¤‡æ‰«æäºŒç»´ç 
```

**2. é…ç½®**

```json
{
  "channels": {
    "whatsapp": {
      "enabled": true,
      "allowFrom": ["+1234567890"]
    }
  }
}
```

**3. è¿è¡Œ**ï¼ˆä¸¤ä¸ªç»ˆç«¯ï¼‰

```bash
# ç»ˆç«¯1
nanobot channels login

# ç»ˆç«¯2
nanobot gateway
```

### Feishu (é£ä¹¦)

ä½¿ç”¨ **WebSocket** é•¿è¿æ¥ â€” æ— éœ€å…¬ç½‘IPã€‚

**1. åˆ›å»ºé£ä¹¦æœºå™¨äºº**
- è®¿é—® [é£ä¹¦å¼€æ”¾å¹³å°](https://open.feishu.cn/app)
- åˆ›å»ºæ–°åº”ç”¨ â†’ å¯ç”¨ **æœºå™¨äºº** èƒ½åŠ›
- **æƒé™**ï¼šæ·»åŠ  `im:message`ï¼ˆå‘é€æ¶ˆæ¯ï¼‰
- **äº‹ä»¶**ï¼šæ·»åŠ  `im.message.receive_v1`ï¼ˆæ¥æ”¶æ¶ˆæ¯ï¼‰
  - é€‰æ‹© **é•¿è¿æ¥** æ¨¡å¼ï¼ˆéœ€è¦å…ˆè¿è¡Œnanobotå»ºç«‹è¿æ¥ï¼‰
- ä»"å‡­è¯ä¸åŸºç¡€ä¿¡æ¯"è·å– **App ID** å’Œ **App Secret**
- å‘å¸ƒåº”ç”¨

**2. é…ç½®**

```json
{
  "channels": {
    "feishu": {
      "enabled": true,
      "appId": "cli_xxx",
      "appSecret": "xxx",
      "encryptKey": "",
      "verificationToken": "",
      "allowFrom": []
    }
  }
}
```

`encryptKey` å’Œ `verificationToken` åœ¨é•¿è¿æ¥æ¨¡å¼ä¸‹æ˜¯å¯é€‰çš„ã€‚
`allowFrom`ï¼šç•™ç©ºå…è®¸æ‰€æœ‰ç”¨æˆ·ï¼Œæˆ–æ·»åŠ  `["ou_xxx"]` é™åˆ¶è®¿é—®ã€‚

**3. è¿è¡Œ**

```bash
nanobot gateway
```

### DingTalk (é’‰é’‰)

ä½¿ç”¨ **æµæ¨¡å¼** â€” æ— éœ€å…¬ç½‘IPã€‚

**1. åˆ›å»ºé’‰é’‰æœºå™¨äºº**
- è®¿é—® [é’‰é’‰å¼€æ”¾å¹³å°](https://open-dev.dingtalk.com/)
- åˆ›å»ºæ–°åº”ç”¨ â†’ æ·»åŠ  **æœºå™¨äºº** èƒ½åŠ›
- **é…ç½®**ï¼š
  - æ‰“å¼€ **æµæ¨¡å¼** å¼€å…³
- **æƒé™**ï¼šæ·»åŠ å‘é€æ¶ˆæ¯æ‰€éœ€çš„æƒé™
- ä»"å‡­è¯"è·å– **AppKey**ï¼ˆClient IDï¼‰å’Œ **AppSecret**ï¼ˆClient Secretï¼‰
- å‘å¸ƒåº”ç”¨

**2. é…ç½®**

```json
{
  "channels": {
    "dingtalk": {
      "enabled": true,
      "clientId": "YOUR_APP_KEY",
      "clientSecret": "YOUR_APP_SECRET",
      "allowFrom": []
    }
  }
}
```

`allowFrom`ï¼šç•™ç©ºå…è®¸æ‰€æœ‰ç”¨æˆ·ï¼Œæˆ–æ·»åŠ  `["staffId"]` é™åˆ¶è®¿é—®ã€‚

**3. è¿è¡Œ**

```bash
nanobot gateway
```

---

## âš™ï¸ é…ç½®æ–‡ä»¶è¯¦è§£

é…ç½®æ–‡ä»¶ä½ç½®ï¼š`~/.nanobot/config.json`

### å®Œæ•´é…ç½®ç¤ºä¾‹

```json
{
  "agents": {
    "defaults": {
      "workspace": "~/.nanobot/workspace",
      "model": "anthropic/claude-opus-4-5",
      "max_tokens": 8192,
      "temperature": 0.7,
      "max_tool_iterations": 20
    }
  },
  "channels": {
    "telegram": {
      "enabled": false,
      "token": "",
      "allowFrom": [],
      "proxy": null
    },
    "discord": {
      "enabled": false,
      "token": "",
      "allowFrom": [],
      "gateway_url": "wss://gateway.discord.gg/?v=10&encoding=json",
      "intents": 37377
    },
    "whatsapp": {
      "enabled": false,
      "bridge_url": "ws://localhost:3001",
      "allowFrom": []
    },
    "feishu": {
      "enabled": false,
      "app_id": "",
      "app_secret": "",
      "encrypt_key": "",
      "verification_token": "",
      "allowFrom": []
    },
    "dingtalk": {
      "enabled": false,
      "client_id": "",
      "client_secret": "",
      "allowFrom": []
    }
  },
  "providers": {
    "anthropic": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "openai": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "openrouter": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "deepseek": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "groq": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "zhipu": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "dashscope": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "vllm": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "gemini": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "moonshot": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    },
    "aihubmix": {
      "api_key": "",
      "api_base": null,
      "extra_headers": null
    }
  },
  "gateway": {
    "host": "0.0.0.0",
    "port": 18790
  },
  "tools": {
    "web": {
      "search": {
        "api_key": "",
        "max_results": 5
      }
    },
    "exec": {
      "timeout": 60
    },
    "restrict_to_workspace": false
  }
}
```

### é…ç½®è¯´æ˜

#### agents.defaults
- `workspace`: å·¥ä½œç©ºé—´ç›®å½•è·¯å¾„
- `model`: é»˜è®¤ä½¿ç”¨çš„LLMæ¨¡å‹
- `max_tokens`: æœ€å¤§ç”Ÿæˆtokenæ•°
- `temperature`: æ¸©åº¦å‚æ•°ï¼ˆ0-1ï¼Œè¶Šé«˜è¶Šéšæœºï¼‰
- `max_tool_iterations`: æœ€å¤§å·¥å…·è°ƒç”¨è¿­ä»£æ¬¡æ•°

#### channels.*
- `enabled`: æ˜¯å¦å¯ç”¨è¯¥æ¸ é“
- `token/app_id/client_id`: è®¤è¯å‡­è¯
- `allowFrom`: å…è®¸çš„ç”¨æˆ·IDåˆ—è¡¨ï¼ˆç©ºåˆ—è¡¨è¡¨ç¤ºå…è®¸æ‰€æœ‰ç”¨æˆ·ï¼‰
- `proxy`: ä»£ç†è®¾ç½®ï¼ˆä»…Telegramæ”¯æŒï¼‰

#### providers.*
- `api_key`: APIå¯†é’¥
- `api_base`: APIåŸºç¡€URLï¼ˆå¯é€‰ï¼‰
- `extra_headers`: é¢å¤–çš„HTTPå¤´ï¼ˆå¯é€‰ï¼‰

#### tools
- `web.search.api_key`: Braveæœç´¢APIå¯†é’¥ï¼ˆç”¨äºç½‘é¡µæœç´¢ï¼‰
- `web.search.max_results`: æœç´¢ç»“æœæœ€å¤§æ•°é‡
- `exec.timeout`: Shellå‘½ä»¤æ‰§è¡Œè¶…æ—¶æ—¶é—´ï¼ˆç§’ï¼‰
- `restrict_to_workspace`: æ˜¯å¦é™åˆ¶å·¥å…·è®¿é—®ä»…åœ¨å·¥ä½œç©ºé—´ç›®å½•å†…

---

## ğŸ› ï¸ CLIå‘½ä»¤å‚è€ƒ

| å‘½ä»¤ | æè¿° |
|------|------|
| `nanobot onboard` | åˆå§‹åŒ–é…ç½®å’Œå·¥ä½œç©ºé—´ |
| `nanobot agent -m "..."` | ä¸ä»£ç†èŠå¤©ï¼ˆå•æ¡æ¶ˆæ¯ï¼‰ |
| `nanobot agent` | ä¸ä»£ç†èŠå¤©ï¼ˆäº¤äº’æ¨¡å¼ï¼‰ |
| `nanobot gateway` | å¯åŠ¨ç½‘å…³æœåŠ¡ |
| `nanobot status` | æ˜¾ç¤ºçŠ¶æ€ä¿¡æ¯ |
| `nanobot channels login` | é“¾æ¥WhatsAppï¼ˆæ‰«ç ï¼‰ |
| `nanobot channels status` | æ˜¾ç¤ºæ¸ é“çŠ¶æ€ |

### å®šæ—¶ä»»åŠ¡å‘½ä»¤

```bash
# æ·»åŠ ä»»åŠ¡
nanobot cron add --name "daily" --message "æ—©ä¸Šå¥½ï¼" --cron "0 9 * * *"
nanobot cron add --name "hourly" --message "æ£€æŸ¥çŠ¶æ€" --every 3600

# åˆ—å‡ºä»»åŠ¡
nanobot cron list

# åˆ é™¤ä»»åŠ¡
nanobot cron remove <job_id>
```

---

## ğŸ³ Dockeréƒ¨ç½²

### æ„å»ºé•œåƒ

```bash
docker build -t nanobot .
```

### è¿è¡Œå®¹å™¨

```bash
# åˆå§‹åŒ–é…ç½®ï¼ˆä»…é¦–æ¬¡ï¼‰
docker run -v ~/.nanobot:/root/.nanobot --rm nanobot onboard

# ç¼–è¾‘é…ç½®æ–‡ä»¶æ·»åŠ APIå¯†é’¥
vim ~/.nanobot/config.json

# è¿è¡Œç½‘å…³ï¼ˆè¿æ¥Telegram/WhatsAppï¼‰
docker run -v ~/.nanobot:/root/.nanobot -p 18790:18790 nanobot gateway

# è¿è¡Œä»£ç†
docker run -v ~/.nanobot:/root/.nanobot nanobot agent -m "Hello!"
```

> **æç¤º**: `-v ~/.nanobot:/root/.nanobot` å‚æ•°å°†æœ¬åœ°é…ç½®ç›®å½•æŒ‚è½½åˆ°å®¹å™¨ä¸­ï¼Œä½¿é…ç½®å’Œå·¥ä½œç©ºé—´åœ¨å®¹å™¨é‡å¯åæŒä¹…åŒ–ã€‚

---

## ğŸ”’ å®‰å…¨å»ºè®®

å¯¹äºç”Ÿäº§ç¯å¢ƒéƒ¨ç½²ï¼Œå»ºè®®åœ¨é…ç½®ä¸­è®¾ç½® `"restrictToWorkspace": true` ä»¥å°†ä»£ç†é™åˆ¶åœ¨å·¥ä½œç©ºé—´ç›®å½•å†…ã€‚

| é€‰é¡¹ | é»˜è®¤å€¼ | æè¿° |
|------|--------|------|
| `tools.restrictToWorkspace` | `false` | å½“ä¸º `true` æ—¶ï¼Œé™åˆ¶æ‰€æœ‰ä»£ç†å·¥å…·ï¼ˆshellã€æ–‡ä»¶è¯»å†™ã€åˆ—è¡¨ï¼‰ä»…åœ¨å·¥ä½œç©ºé—´ç›®å½•å†…è®¿é—®ã€‚é˜²æ­¢è·¯å¾„éå†å’Œè¶Šç•Œè®¿é—®ã€‚ |
| `channels.*.allowFrom` | `[]`ï¼ˆå…è®¸æ‰€æœ‰ï¼‰ | ç”¨æˆ·IDç™½åå•ã€‚ç©ºåˆ—è¡¨ = å…è®¸æ‰€æœ‰äººï¼›éç©ºåˆ—è¡¨ = åªæœ‰åˆ—å‡ºçš„ç”¨æˆ·å¯ä»¥äº¤äº’ã€‚ |

---

## ğŸ“š å·¥ä½œç©ºé—´ç»“æ„

å·¥ä½œç©ºé—´é»˜è®¤ä½äº `~/.nanobot/workspace`ï¼ŒåŒ…å«ä»¥ä¸‹æ–‡ä»¶ï¼š

```
workspace/
â”œâ”€â”€ AGENTS.md       # ä»£ç†æŒ‡ä»¤
â”œâ”€â”€ SOUL.md         # ä»£ç†ä¸ªæ€§
â”œâ”€â”€ USER.md         # ç”¨æˆ·ä¿¡æ¯
â”œâ”€â”€ TOOLS.md        # å·¥å…·æ–‡æ¡£
â”œâ”€â”€ HEARTBEAT.md    # å¿ƒè·³ä»»åŠ¡
â””â”€â”€ memory/
    â””â”€â”€ MEMORY.md   # é•¿æœŸè®°å¿†
```

### æ–‡ä»¶è¯´æ˜

- **AGENTS.md**: å®šä¹‰ä»£ç†çš„è¡Œä¸ºå‡†åˆ™å’ŒæŒ‡å¯¼åŸåˆ™
- **SOUL.md**: å®šä¹‰ä»£ç†çš„ä¸ªæ€§å’Œä»·å€¼è§‚
- **USER.md**: å­˜å‚¨ç”¨æˆ·åå¥½å’Œä¿¡æ¯
- **TOOLS.md**: å·¥å…·ä½¿ç”¨æ–‡æ¡£
- **HEARTBEAT.md**: å¿ƒè·³ä»»åŠ¡å®šä¹‰ï¼ˆæ¯30åˆ†é’Ÿæ‰§è¡Œä¸€æ¬¡ï¼‰
- **memory/MEMORY.md**: é•¿æœŸè®°å¿†å­˜å‚¨ï¼Œè·¨ä¼šè¯æŒä¹…åŒ–

---

## ğŸ”§ å¼€å‘è€…æŒ‡å—

### æ·»åŠ æ–°çš„LLMæä¾›å•†

nanobot ä½¿ç”¨ **æä¾›å•†æ³¨å†Œè¡¨**ï¼ˆ`nanobot/providers/registry.py`ï¼‰ä½œä¸ºå•ä¸€äº‹å®æ¥æºã€‚æ·»åŠ æ–°æä¾›å•†åªéœ€ **2æ­¥** â€” æ— éœ€ä¿®æ”¹if-elifé“¾ã€‚

**æ­¥éª¤1.** åœ¨ `nanobot/providers/registry.py` çš„ `PROVIDERS` ä¸­æ·»åŠ  `ProviderSpec` æ¡ç›®ï¼š

```python
ProviderSpec(
    name="myprovider",                   # é…ç½®å­—æ®µå
    keywords=("myprovider", "mymodel"),  # æ¨¡å‹åç§°å…³é”®è¯ç”¨äºè‡ªåŠ¨åŒ¹é…
    env_key="MYPROVIDER_API_KEY",        # LiteLLMçš„ç¯å¢ƒå˜é‡
    display_name="My Provider",          # åœ¨ `nanobot status` ä¸­æ˜¾ç¤º
    litellm_prefix="myprovider",         # è‡ªåŠ¨å‰ç¼€ï¼šmodel â†’ myprovider/model
    skip_prefixes=("myprovider/",),      # ä¸è¦é‡å¤å‰ç¼€
)
```

**æ­¥éª¤2.** åœ¨ `nanobot/config/schema.py` çš„ `ProvidersConfig` ä¸­æ·»åŠ å­—æ®µï¼š

```python
class ProvidersConfig(BaseModel):
    ...
    myprovider: ProviderConfig = ProviderConfig()
```

å°±è¿™æ ·ï¼ç¯å¢ƒå˜é‡ã€æ¨¡å‹å‰ç¼€ã€é…ç½®åŒ¹é…å’Œ `nanobot status` æ˜¾ç¤ºéƒ½ä¼šè‡ªåŠ¨å·¥ä½œã€‚

### å¸¸ç”¨ ProviderSpec é€‰é¡¹

| å­—æ®µ | æè¿° | ç¤ºä¾‹ |
|------|------|------|
| `litellm_prefix` | ä¸ºLiteLLMè‡ªåŠ¨å‰ç¼€æ¨¡å‹åç§° | `"dashscope"` â†’ `dashscope/qwen-max` |
| `skip_prefixes` | å¦‚æœæ¨¡å‹å·²ç»ä»¥è¿™äº›å¼€å¤´ï¼Œåˆ™ä¸è¦å‰ç¼€ | `("dashscope/", "openrouter/")` |
| `env_extras` | è¦è®¾ç½®çš„å…¶ä»–ç¯å¢ƒå˜é‡ | `(("ZHIPUAI_API_KEY", "{api_key}"),)` |
| `model_overrides` | æ¯æ¨¡å‹å‚æ•°è¦†ç›– | `(("kimi-k2.5", {"temperature": 1.0}),)` |
| `is_gateway` | å¯ä»¥è·¯ç”±ä»»ä½•æ¨¡å‹ï¼ˆå¦‚OpenRouterï¼‰ | `True` |
| `detect_by_key_prefix` | é€šè¿‡APIå¯†é’¥å‰ç¼€æ£€æµ‹ç½‘å…³ | `"sk-or-"` |
| `detect_by_base_keyword` | é€šè¿‡APIåŸºç¡€URLæ£€æµ‹ç½‘å…³ | `"openrouter"` |
| `strip_model_prefix` | åœ¨é‡æ–°å‰ç¼€ä¹‹å‰å‰¥ç¦»ç°æœ‰å‰ç¼€ | `True`ï¼ˆç”¨äºAiHubMixï¼‰ |

---

## ğŸ“¦ æ‰“åŒ…æˆEXEï¼ˆWindowsï¼‰

ä¸ºäº†æ–¹ä¾¿éå¼€å‘è€…éƒ¨ç½²ï¼Œå¯ä»¥å°†nanobotæ‰“åŒ…æˆWindowså¯æ‰§è¡Œæ–‡ä»¶ï¼ˆ.exeï¼‰ã€‚ä»¥ä¸‹æ˜¯ä½¿ç”¨PyInstallerå’ŒNuitkaä¸¤ç§æ–¹æ³•çš„è¯¦ç»†æ­¥éª¤ã€‚

### æ–¹æ³•ä¸€ï¼šä½¿ç”¨PyInstaller

PyInstalleræ˜¯æœ€å¸¸ç”¨çš„Pythonæ‰“åŒ…å·¥å…·ï¼Œç®€å•æ˜“ç”¨ã€‚

#### 1. å®‰è£…PyInstaller

```bash
pip install pyinstaller
```

#### 2. åˆ›å»ºæ‰“åŒ…è„šæœ¬

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `build_exe.py` æ–‡ä»¶ï¼š

```python
import PyInstaller.__main__
import os
import sys

# è·å–é¡¹ç›®æ ¹ç›®å½•
project_root = os.path.dirname(os.path.abspath(__file__))

# PyInstallerå‚æ•°
PyInstaller.__main__.run([
    'nanobot/__main__.py',  # å…¥å£æ–‡ä»¶
    '--name=nanobot',       # ç”Ÿæˆçš„exeåç§°
    '--onefile',            # æ‰“åŒ…æˆå•ä¸ªexeæ–‡ä»¶
    '--windowed',           # ä¸æ˜¾ç¤ºæ§åˆ¶å°çª—å£ï¼ˆå¦‚æœéœ€è¦è°ƒè¯•ï¼Œå»æ‰æ­¤å‚æ•°ï¼‰
    '--clean',              # æ¸…ç†ä¸´æ—¶æ–‡ä»¶
    '--noconfirm',          # è¦†ç›–è¾“å‡ºç›®å½•è€Œä¸è¯¢é—®
    '--add-data=nanobot;nanobot',  # åŒ…å«nanobotåŒ…
    '--hidden-import=nanobot.cli.commands',
    '--hidden-import=nanobot.config.loader',
    '--hidden-import=nanobot.config.schema',
    '--hidden-import=nanobot.agent.loop',
    '--hidden-import=nanobot.agent.context',
    '--hidden-import=nanobot.agent.tools.registry',
    '--hidden-import=nanobot.bus.queue',
    '--hidden-import=nanobot.channels.manager',
    '--hidden-import=nanobot.providers.litellm_provider',
    '--hidden-import=nanobot.session.manager',
    '--hidden-import=nanobot.cron.service',
    '--hidden-import=nanobot.heartbeat.service',
    '--hidden-import=typer',
    '--hidden-import=loguru',
    '--hidden-import=pydantic',
    '--hidden-import=pydantic_settings',
    '--hidden-import=websockets',
    '--hidden-import=httpx',
    '--hidden-import=readability_lxml',
    '--hidden-import=rich',
    '--hidden-import=croniter',
    '--hidden-import=dingtalk_stream',
    '--hidden-import=python_telegram_bot',
    '--hidden-import=lark_oapi',
    '--hidden-import=socksio',
    '--hidden-import=litellm',
    '--collect-all=litellm',  # æ”¶é›†litellmçš„æ‰€æœ‰ä¾èµ–
    '--collect-all=typer',    # æ”¶é›†typerçš„æ‰€æœ‰ä¾èµ–
    '--icon=nanobot_logo.png' if os.path.exists('nanobot_logo.png') else '',
])
```

#### 3. æ‰§è¡Œæ‰“åŒ…

```bash
python build_exe.py
```

#### 4. å¤„ç†bridgeç›®å½•ï¼ˆWhatsAppéœ€è¦ï¼‰

ç”±äºWhatsAppéœ€è¦Node.jsçš„bridgeæœåŠ¡ï¼Œéœ€è¦å•ç‹¬å¤„ç†ï¼š

```bash
# å¤åˆ¶bridgeç›®å½•åˆ°distç›®å½•
xcopy /E /I bridge dist\bridge
```

#### 5. åˆ›å»ºå®‰è£…åŒ…

ä½¿ç”¨NSISæˆ–Inno Setupåˆ›å»ºå®‰è£…ç¨‹åºï¼š

**ä½¿ç”¨Inno Setup**ï¼š

1. å®‰è£…Inno Setupï¼šhttps://jrsoftware.org/isdl.php

2. åˆ›å»º `nanobot_setup.iss` æ–‡ä»¶ï¼š

```iss
[Setup]
AppName=nanobot
AppVersion=0.1.3
DefaultDirName={pf}\nanobot
DefaultGroupName=nanobot
OutputBaseFilename=nanobot_setup
Compression=lzma
SolidCompression=yes
WizardStyle=modern

[Files]
Source: "dist\nanobot.exe"; DestDir: "{app}"; Flags: ignoreversion
Source: "dist\bridge\*"; DestDir: "{app}\bridge"; Flags: ignoreversion recursesubdirs createallsubdirs

[Icons]
Name: "{group}\nanobot"; Filename: "{app}\nanobot.exe"
Name: "{commondesktop}\nanobot"; Filename: "{app}\nanobot.exe"

[Run]
Filename: "{app}\nanobot.exe"; Description: "å¯åŠ¨nanobot"; Flags: nowait postinstall skipifsilent
```

3. ç¼–è¯‘å®‰è£…åŒ…ï¼š

```bash
iscc nanobot_setup.iss
```

### æ–¹æ³•äºŒï¼šä½¿ç”¨Nuitkaï¼ˆæ¨èï¼‰

Nuitkaæ˜¯ä¸€ä¸ªPythonç¼–è¯‘å™¨ï¼Œå¯ä»¥å°†Pythonä»£ç ç¼–è¯‘æˆC++ï¼Œç„¶åç¼–è¯‘æˆåŸç”Ÿå¯æ‰§è¡Œæ–‡ä»¶ï¼Œæ€§èƒ½æ›´å¥½ã€‚

#### 1. å®‰è£…Nuitka

```bash
pip install nuitka
```

#### 2. å®‰è£…C++ç¼–è¯‘å™¨

Windowséœ€è¦å®‰è£…Visual Studio Build Toolsï¼š
- ä¸‹è½½ï¼šhttps://visualstudio.microsoft.com/downloads/
- å®‰è£…"ä½¿ç”¨C++çš„æ¡Œé¢å¼€å‘"å·¥ä½œè´Ÿè½½

#### 3. åˆ›å»ºæ‰“åŒ…è„šæœ¬

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `build_nuitka.py` æ–‡ä»¶ï¼š

```python
import os
import subprocess
import sys

# è·å–é¡¹ç›®æ ¹ç›®å½•
project_root = os.path.dirname(os.path.abspath(__file__))

# Nuitkaå‚æ•°
nuitka_args = [
    'nanobot/__main__.py',
    '--standalone',              # ç‹¬ç«‹å¯æ‰§è¡Œæ–‡ä»¶
    '--onefile',                 # æ‰“åŒ…æˆå•ä¸ªæ–‡ä»¶
    '--windows-console-mode=disable',  # ç¦ç”¨æ§åˆ¶å°çª—å£ï¼ˆå¦‚æœéœ€è¦è°ƒè¯•ï¼Œæ”¹ä¸º'force'ï¼‰
    '--output-dir=dist_nuitka',  # è¾“å‡ºç›®å½•
    '--output-filename=nanobot.exe',
    '--include-package=nanobot',
    '--include-package-data=nanobot',
    '--include-data-dir=nanobot=nanobot',
    '--include-data-dir=bridge=bridge',
    '--enable-plugin=pylint-warnings',
    '--follow-imports',
    '--nofollow-import-to=tests',
    '--nofollow-import-to=*.tests',
    '--assume-yes-for-downloads',
    '--show-progress',
    '--show-memory',
]

# æ·»åŠ éšè—å¯¼å…¥
hidden_imports = [
    'nanobot.cli.commands',
    'nanobot.config.loader',
    'nanobot.config.schema',
    'nanobot.agent.loop',
    'nanobot.agent.context',
    'nanobot.agent.tools.registry',
    'nanobot.bus.queue',
    'nanobot.channels.manager',
    'nanobot.providers.litellm_provider',
    'nanobot.session.manager',
    'nanobot.cron.service',
    'nanobot.heartbeat.service',
    'typer',
    'loguru',
    'pydantic',
    'pydantic_settings',
    'websockets',
    'httpx',
    'readability_lxml',
    'rich',
    'croniter',
    'dingtalk_stream',
    'python_telegram_bot',
    'lark_oapi',
    'socksio',
    'litellm',
]

for imp in hidden_imports:
    nuitka_args.extend(['--include-package', imp])

# æ‰§è¡ŒNuitka
print("å¼€å§‹ä½¿ç”¨Nuitkaæ‰“åŒ…...")
print(f"å·¥ä½œç›®å½•: {project_root}")
print(f"å‘½ä»¤: nuitka {' '.join(nuitka_args)}")

result = subprocess.run([sys.executable, '-m', 'nuitka'] + nuitka_args, cwd=project_root)

if result.returncode == 0:
    print("\nâœ“ æ‰“åŒ…æˆåŠŸï¼")
    print(f"å¯æ‰§è¡Œæ–‡ä»¶ä½äº: {os.path.join(project_root, 'dist_nuitka', 'nanobot.exe')}")
else:
    print("\nâœ— æ‰“åŒ…å¤±è´¥ï¼")
    sys.exit(1)
```

#### 4. æ‰§è¡Œæ‰“åŒ…

```bash
python build_nuitka.py
```

#### 5. åˆ›å»ºå®‰è£…åŒ…

ä¸æ–¹æ³•ä¸€ç›¸åŒï¼Œä½¿ç”¨Inno Setupåˆ›å»ºå®‰è£…ç¨‹åºã€‚

### æ–¹æ³•ä¸‰ï¼šä½¿ç”¨cx_Freeze

cx_Freezeæ˜¯å¦ä¸€ä¸ªæµè¡Œçš„Pythonæ‰“åŒ…å·¥å…·ã€‚

#### 1. å®‰è£…cx_Freeze

```bash
pip install cx_Freeze
```

#### 2. åˆ›å»ºæ‰“åŒ…è„šæœ¬

åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»º `setup_cx.py` æ–‡ä»¶ï¼š

```python
import sys
from cx_Freeze import setup, Executable

# æ„å»ºé€‰é¡¹
build_exe_options = {
    "packages": [
        'nanobot',
        'nanobot.cli',
        'nanobot.config',
        'nanobot.agent',
        'nanobot.bus',
        'nanobot.channels',
        'nanobot.providers',
        'nanobot.session',
        'nanobot.cron',
        'nanobot.heartbeat',
        'nanobot.utils',
        'nanobot.skills',
        'typer',
        'loguru',
        'pydantic',
        'pydantic_settings',
        'websockets',
        'httpx',
        'readability_lxml',
        'rich',
        'croniter',
        'dingtalk_stream',
        'python_telegram_bot',
        'lark_oapi',
        'socksio',
        'litellm',
    ],
    "includes": [
        'nanobot.__main__',
        'nanobot.cli.commands',
        'nanobot.config.loader',
        'nanobot.config.schema',
        'nanobot.agent.loop',
        'nanobot.agent.context',
        'nanobot.agent.tools.registry',
        'nanobot.bus.queue',
        'nanobot.channels.manager',
        'nanobot.providers.litellm_provider',
        'nanobot.session.manager',
        'nanobot.cron.service',
        'nanobot.heartbeat.service',
    ],
    "excludes": [
        'tkinter',
        'unittest',
        'test',
        'tests',
    ],
    "include_files": [
        ('bridge', 'bridge'),
    ],
    "optimize": 0,
}

# åŸºç¡€è®¾ç½®
base = None
if sys.platform == "win32":
    base = "Win32GUI"  # ä¸æ˜¾ç¤ºæ§åˆ¶å°çª—å£

# æ‰§è¡Œæ–‡ä»¶
executables = [
    Executable(
        script="nanobot/__main__.py",
        base=base,
        target_name="nanobot.exe",
        icon="nanobot_logo.png" if __import__('os').path.exists('nanobot_logo.png') else None,
    )
]

# è®¾ç½®
setup(
    name="nanobot",
    version="0.1.3",
    description="A lightweight personal AI assistant framework",
    options={"build_exe": build_exe_options},
    executables=executables,
)
```

#### 3. æ‰§è¡Œæ‰“åŒ…

```bash
python setup_cx.py build
```

### æ‰“åŒ…åçš„ä½¿ç”¨è¯´æ˜

#### 1. é¦–æ¬¡è¿è¡Œ

æ‰“åŒ…åçš„exeæ–‡ä»¶é¦–æ¬¡è¿è¡Œæ—¶ï¼Œéœ€è¦åˆå§‹åŒ–é…ç½®ï¼š

```bash
nanobot.exe onboard
```

è¿™å°†åœ¨ç”¨æˆ·ç›®å½•ä¸‹åˆ›å»º `~/.nanobot` é…ç½®ç›®å½•ã€‚

#### 2. é…ç½®APIå¯†é’¥

ç”¨æˆ·éœ€è¦æ‰‹åŠ¨ç¼–è¾‘ `~/.nanobot/config.json` æ–‡ä»¶ï¼Œæ·»åŠ APIå¯†é’¥ã€‚

#### 3. è¿è¡Œå‘½ä»¤

```bash
# èŠå¤©
nanobot.exe agent -m "ä½ å¥½ï¼"

# å¯åŠ¨ç½‘å…³
nanobot.exe gateway

# æŸ¥çœ‹çŠ¶æ€
nanobot.exe status
```

#### 4. WhatsAppæ”¯æŒ

å¦‚æœéœ€è¦WhatsAppåŠŸèƒ½ï¼Œç”¨æˆ·è¿˜éœ€è¦ï¼š

1. å®‰è£…Node.jsï¼ˆâ‰¥ 18ï¼‰
2. è¿›å…¥bridgeç›®å½•
3. è¿è¡Œ `npm install`
4. è¿è¡Œ `npm start` å¯åŠ¨bridgeæœåŠ¡
5. åœ¨å¦ä¸€ä¸ªç»ˆç«¯è¿è¡Œ `nanobot.exe channels login` æ‰«ç ç™»å½•
6. è¿è¡Œ `nanobot.exe gateway` å¯åŠ¨ç½‘å…³

### æ‰“åŒ…æ³¨æ„äº‹é¡¹

1. **æ–‡ä»¶å¤§å°**: æ‰“åŒ…åçš„exeæ–‡ä»¶å¯èƒ½å¾ˆå¤§ï¼ˆ100MB+ï¼‰ï¼Œè¿™æ˜¯æ­£å¸¸çš„ï¼Œå› ä¸ºåŒ…å«äº†æ‰€æœ‰ä¾èµ–ã€‚

2. **æ€æ¯’è½¯ä»¶**: æŸäº›æ€æ¯’è½¯ä»¶å¯èƒ½ä¼šè¯¯æŠ¥æ‰“åŒ…åçš„exeæ–‡ä»¶ä¸ºç—…æ¯’ï¼Œè¿™æ˜¯PyInstaller/Nuitkaçš„å¸¸è§é—®é¢˜ã€‚å¯ä»¥æ·»åŠ åˆ°ç™½åå•æˆ–ä½¿ç”¨ä»£ç ç­¾åã€‚

3. **é…ç½®æ–‡ä»¶**: é…ç½®æ–‡ä»¶ `~/.nanobot/config.json` ä¸ä¼šè¢«æ‰“åŒ…è¿›exeï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶åˆ›å»ºã€‚

4. **å·¥ä½œç©ºé—´**: å·¥ä½œç©ºé—´ `~/.nanobot/workspace` ä¹Ÿä¸ä¼šè¢«æ‰“åŒ…ï¼Œéœ€è¦åœ¨è¿è¡Œæ—¶åˆ›å»ºã€‚

5. **BridgeæœåŠ¡**: WhatsAppçš„bridgeæœåŠ¡éœ€è¦Node.jsç¯å¢ƒï¼Œæ— æ³•å®Œå…¨æ‰“åŒ…è¿›exeã€‚å¯ä»¥è€ƒè™‘ï¼š
   - æä¾›å•ç‹¬çš„bridgeå®‰è£…åŒ…
   - ä½¿ç”¨nexeå°†Node.jsåº”ç”¨ä¹Ÿæ‰“åŒ…æˆexe
   - æä¾›è¯¦ç»†çš„å®‰è£…è¯´æ˜

6. **ä»£ç ç­¾å**: ä¸ºäº†é¿å…Windows SmartScreenè­¦å‘Šï¼Œå»ºè®®å¯¹exeæ–‡ä»¶è¿›è¡Œä»£ç ç­¾åï¼š
   ```bash
   signtool sign /f certificate.pfx /p password /t http://timestamp.digicert.com nanobot.exe
   ```

7. **æµ‹è¯•**: æ‰“åŒ…ååŠ¡å¿…åœ¨å¹²å‡€çš„Windowsç³»ç»Ÿä¸Šæµ‹è¯•æ‰€æœ‰åŠŸèƒ½ã€‚

### åˆ›å»ºä¾¿æºç‰ˆï¼ˆæ— éœ€å®‰è£…ï¼‰

å¦‚æœä¸æƒ³åˆ›å»ºå®‰è£…åŒ…ï¼Œå¯ä»¥åˆ›å»ºä¾¿æºç‰ˆï¼š

1. åˆ›å»º `nanobot_portable` ç›®å½•
2. å¤åˆ¶ `nanobot.exe` åˆ°è¯¥ç›®å½•
3. åˆ›å»º `start.bat` å¯åŠ¨è„šæœ¬ï¼š

```batch
@echo off
chcp 65001 >nul
echo ========================================
echo nanobot - ä¸ªäººAIåŠ©æ‰‹
echo ========================================
echo.

REM è®¾ç½®é…ç½®ç›®å½•ä¸ºå½“å‰ç›®å½•
set NANOBOT_CONFIG_DIR=%~dp0config
set NANOBOT_WORKSPACE=%~dp0workspace

REM åˆ›å»ºå¿…è¦çš„ç›®å½•
if not exist "%NANOBOT_CONFIG_DIR%" mkdir "%NANOBOT_CONFIG_DIR%"
if not exist "%NANOBOT_WORKSPACE%" mkdir "%NANOBOT_WORKSPACE%"

REM æ£€æŸ¥é…ç½®æ–‡ä»¶
if not exist "%NANOBOT_CONFIG_DIR%\config.json" (
    echo é¦–æ¬¡è¿è¡Œï¼Œæ­£åœ¨åˆå§‹åŒ–é…ç½®...
    nanobot.exe onboard
    echo.
    echo è¯·ç¼–è¾‘ %NANOBOT_CONFIG_DIR%\config.json æ·»åŠ APIå¯†é’¥
    echo.
    pause
    exit /b
)

REM æ˜¾ç¤ºèœå•
:menu
echo è¯·é€‰æ‹©æ“ä½œï¼š
echo 1. èŠå¤©ï¼ˆäº¤äº’æ¨¡å¼ï¼‰
echo 2. èŠå¤©ï¼ˆå•æ¡æ¶ˆæ¯ï¼‰
echo 3. å¯åŠ¨ç½‘å…³
echo 4. æŸ¥çœ‹çŠ¶æ€
echo 5. é€€å‡º
echo.
set /p choice=è¯·è¾“å…¥é€‰é¡¹ (1-5):

if "%choice%"=="1" goto chat
if "%choice%"=="2" goto message
if "%choice%"=="3" goto gateway
if "%choice%"=="4" goto status
if "%choice%"=="5" goto end

echo æ— æ•ˆé€‰é¡¹ï¼Œè¯·é‡æ–°é€‰æ‹©
goto menu

:chat
nanobot.exe agent
goto menu

:message
set /p msg=è¯·è¾“å…¥æ¶ˆæ¯ï¼š
nanobot.exe agent -m "%msg%"
goto menu

:gateway
nanobot.exe gateway
goto menu

:status
nanobot.exe status
pause
goto menu

:end
echo å†è§ï¼
pause
```

4. åˆ›å»º `README.txt` è¯´æ˜æ–‡ä»¶ï¼š

```text
nanobot ä¾¿æºç‰ˆä½¿ç”¨è¯´æ˜
======================

1. é¦–æ¬¡è¿è¡Œ
   åŒå‡» start.batï¼Œç¨‹åºä¼šè‡ªåŠ¨åˆå§‹åŒ–é…ç½®

2. é…ç½®APIå¯†é’¥
   ç¼–è¾‘ config\config.json æ–‡ä»¶ï¼Œæ·»åŠ ä½ çš„APIå¯†é’¥
   è·å–APIå¯†é’¥ï¼šhttps://openrouter.ai/keys

3. å¼€å§‹ä½¿ç”¨
   å†æ¬¡åŒå‡» start.batï¼Œé€‰æ‹©ä½ æƒ³è¦çš„åŠŸèƒ½

4. é…ç½®æ–‡ä»¶ä½ç½®
   - é…ç½®æ–‡ä»¶ï¼šconfig\config.json
   - å·¥ä½œç©ºé—´ï¼šworkspace\

5. æ›´å¤šå¸®åŠ©
   è®¿é—®ï¼šhttps://github.com/HKUDS/nanobot
```

5. æ‰“åŒ…æˆZIPæ–‡ä»¶åˆ†å‘ï¼š

```bash
powershell Compress-Archive -Path nanobot_portable -DestinationPath nanobot_portable.zip
```

---

## ğŸ“ æ€»ç»“

nanobot æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ã€è½»é‡çº§çš„ä¸ªäººAIåŠ©æ‰‹æ¡†æ¶ï¼Œå…·æœ‰ä»¥ä¸‹ä¼˜åŠ¿ï¼š

- **ä»£ç ç²¾ç®€**: ä»…çº¦4,000è¡Œæ ¸å¿ƒä»£ç ï¼Œæ˜“äºç†è§£å’Œä¿®æ”¹
- **åŠŸèƒ½ä¸°å¯Œ**: æ”¯æŒå¤šç§LLMæä¾›å•†ã€èŠå¤©æ¸ é“ã€å·¥å…·å’Œå®šæ—¶ä»»åŠ¡
- **æ˜“äºéƒ¨ç½²**: æ”¯æŒpipå®‰è£…ã€Dockeréƒ¨ç½²å’ŒEXEæ‰“åŒ…
- **å®‰å…¨å¯é **: æ”¯æŒå·¥ä½œç©ºé—´é™åˆ¶å’Œç”¨æˆ·ç™½åå•
- **æ‰©å±•æ€§å¼º**: æ¨¡å—åŒ–è®¾è®¡ï¼Œæ˜“äºæ·»åŠ æ–°åŠŸèƒ½

æ— è®ºæ˜¯å¼€å‘è€…è¿˜æ˜¯éå¼€å‘è€…ï¼Œéƒ½å¯ä»¥è½»æ¾ä½¿ç”¨nanobotæ„å»ºè‡ªå·±çš„AIåŠ©æ‰‹ã€‚

---

## ğŸ“ è”ç³»æ–¹å¼

- **GitHub**: https://github.com/HKUDS/nanobot
- **é£ä¹¦ç¾¤**: è§ COMMUNICATION.md
- **å¾®ä¿¡ç¾¤**: è§ COMMUNICATION.md
- **Discord**: https://discord.gg/MnCvHqpUGB

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ LICENSE æ–‡ä»¶
